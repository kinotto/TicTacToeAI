!function(){"use strict";function t(t,r){this.x=t,this.y=r}function r(t){this.board=[];for(var r=0;r<i;r++)this.board[r]=t?t[r]:n.EMPTY}function e(){}function o(t,r){this.cell=t,this.indexes=r}var n={EMPTY:"",X:"X",O:"O"},i=9;r.prototype.oppositePlayer=function(t){return t===n.X?n.O:t===n.O?n.X:n.EMPTY},r.prototype.copy=function(){var t=Object.create(this);return t.board=[],[].push.apply(t.board,this.board),t};var a=function(t){return t.x+3*t.y};r.prototype.makeMove=function(t,r){try{if(this.cellAt(r)!=n.EMPTY)throw new Error("Cell is already take");this.board[a(r)]=t}catch(t){throw new Error(t||"Invalid cell")}},r.prototype.cellAt=function(t){return this.board[a(t)]},r.prototype.winner=function(){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],r=this.board,e=0;e<t.length;e++)if(r[t[e][0]]!=n.EMPTY&&r[t[e][0]]==r[t[e][1]]&&r[t[e][1]]==r[t[e][2]])return new o(r[t[e][0]],t[e]);return this.boardFull()?new o(n.EMPTY,null):null},r.prototype.boardFull=function(){for(var t=0;t<i;t++)if(this.board[t]===n.EMPTY)return!1;return!0},r.prototype.emptySlots=function(){for(var r=[],e=0;e<3;e++)for(var o=0;o<3;o++){var i=new t(o,e),a=this.cellAt(i);a===n.EMPTY&&r.push(i)}return r},e.prototype.initialize=function(t,r){this.team=t,this.gameBoard=r},e.prototype.makeMove=function(){for(var t,r,e=this.gameBoard.emptySlots(),o=-1,n=null,i=0;i<e.length;i++){var a=e[i];r=this.gameBoard.copy(),r.makeMove(this.team,a),t=this.minimax(r,this.gameBoard.oppositePlayer(this.team)),t>=o&&(o=t,n=a)}return n},e.prototype.minimax=function(t,r){var e=-1,o=1;r!=this.team&&(o=-1);var n=t.winner();if(null!=n)return this.evaluateWinner(n.cell);for(var i,a,l=t.emptySlots(),u=0;u<l.length;u++)a=t.copy(),a.makeMove(r,l[u]),(i=o*this.minimax(a,t.oppositePlayer(r)))>=e&&(e=i);return o*e},e.prototype.evaluateWinner=function(t){return null===t||t===n.EMPTY?0:t===this.team?1:-1},"undefined"!=typeof module&&module.exports?module.exports={TicTacToeBoard:r,TicTacToeAIPlayer:e}:window.TicTacToe={TicTacToeBoard:r,TicTacToeAIPlayer:e}}();